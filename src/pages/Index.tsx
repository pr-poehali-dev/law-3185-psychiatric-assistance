import { useState } from 'react';
import { Input } from '@/components/ui/input';
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';
import { Card } from '@/components/ui/card';
import Icon from '@/components/ui/icon';

const lawArticles = [
  {
    section: "Раздел I. Общие положения",
    articles: [
      {
        number: "Статья 1",
        title: "Законодательство о психиатрической помощи",
        content: "Законодательство Российской Федерации о психиатрической помощи состоит из настоящего Закона и других федеральных законов, а также законов субъектов Российской Федерации. Правовое регулирование в области оказания психиатрической помощи основывается на Конституции Российской Федерации, общепризнанных принципах и нормах международного права и международных договорах Российской Федерации."
      },
      {
        number: "Статья 2",
        title: "Понятия, применяемые в настоящем Законе",
        content: "В настоящем Законе применяются следующие основные понятия:\n\nпсихиатрическая помощь - комплекс специальных мер медицинского и социального характера;\nпсихическое расстройство - расстройство психической деятельности человека;\nпсихиатрическое освидетельствование - осмотр врачом-психиатром для определения психического состояния;\nдиспансерное наблюдение - динамическое наблюдение за состоянием психического здоровья;\nпсихоневрологическое учреждение - учреждение, оказывающее психиатрическую помощь;\nпсихиатрический стационар - структурное подразделение для круглосуточного наблюдения и лечения;\nлечебно-производственное предприятие - предприятие для трудовой терапии и реабилитации."
      },
      {
        number: "Статья 3",
        title: "Применение настоящего Закона",
        content: "Настоящий Закон применяется в отношении граждан Российской Федерации при оказании им психиатрической помощи. Иностранным гражданам и лицам без гражданства психиатрическая помощь оказывается в соответствии с настоящим Законом."
      }
    ]
  },
  {
    section: "Раздел II. Права лиц, страдающих психическими расстройствами",
    articles: [
      {
        number: "Статья 4",
        title: "Добровольность обращения за психиатрической помощью",
        content: "Психиатрическая помощь оказывается при добровольном обращении лица или с его согласия, за исключением случаев, предусмотренных настоящим Законом. Несовершеннолетнему в возрасте до 15 лет психиатрическая помощь оказывается по просьбе или с согласия их законных представителей."
      },
      {
        number: "Статья 5",
        title: "Права лиц, страдающих психическими расстройствами",
        content: "Лица, страдающие психическими расстройствами, обладают всеми правами и свободами граждан. Они имеют право на:\n\n- уважительное и гуманное отношение;\n- получение информации о своих правах;\n- психиатрическую помощь в наименее ограничительных условиях;\n- содержание в стационаре только в течение необходимого срока;\n- квалифицированное лечение;\n- конфиденциальность сведений;\n- получение разъяснений об используемых методах."
      },
      {
        number: "Статья 6",
        title: "Ограничения выполнения отдельных видов профессиональной деятельности",
        content: "Гражданин может быть временно признан непригодным к выполнению отдельных видов профессиональной деятельности. Такое решение принимается врачебной комиссией на основании оценки психического здоровья."
      },
      {
        number: "Статья 7",
        title: "Представительство граждан, страдающих психическими расстройствами",
        content: "Права и законные интересы граждан, страдающих психическими расстройствами, могут представлять их законные представители, адвокаты или иные лица в порядке, установленном законом."
      }
    ]
  },
  {
    section: "Раздел III. Обеспечение психиатрической помощи",
    articles: [
      {
        number: "Статья 8",
        title: "Виды психиатрической помощи и социальная защита",
        content: "Психиатрическая помощь включает:\n- обследование и освидетельствование;\n- профилактику;\n- диагностику и лечение;\n- медицинскую реабилитацию;\n- экспертизу;\n- социальную реабилитацию.\n\nГосударство гарантирует социальную защиту лиц, страдающих психическими расстройствами."
      },
      {
        number: "Статья 9",
        title: "Учреждения и лица, оказывающие психиатрическую помощь",
        content: "Психиатрическая помощь оказывается медицинскими организациями, имеющими лицензию. Организация помощи осуществляется в психиатрических больницах и диспансерах."
      },
      {
        number: "Статья 10",
        title: "Диспансерное наблюдение",
        content: "Диспансерное наблюдение устанавливается за лицом, страдающим хроническим психическим расстройством с тяжелыми стойкими проявлениями. Оно может устанавливаться независимо от согласия лица в случаях опасности."
      },
      {
        number: "Статья 11",
        title: "Консультативно-лечебная помощь",
        content: "Консультативно-лечебная помощь оказывается врачом-психиатром при самостоятельном обращении лица или по его просьбе при консультациях врачей других специальностей."
      },
      {
        number: "Статья 12",
        title: "Оказание психиатрической помощи при стихийных бедствиях",
        content: "При стихийных бедствиях и катастрофах психиатрическая помощь оказывается в порядке, установленном законодательством о чрезвычайных ситуациях и защите населения."
      },
      {
        number: "Статья 13",
        title: "Приглашение врача-психиатра на дом",
        content: "Врач-психиатр может быть приглашен на дом к лицу, нуждающемуся в психиатрической помощи, по его просьбе или просьбе его законных представителей."
      },
      {
        number: "Статья 14",
        title: "Оказание неотложной психиатрической помощи",
        content: "Неотложная психиатрическая помощь оказывается без согласия лица при непосредственной опасности для себя или окружающих. Решение принимается врачом-психиатром самостоятельно."
      },
      {
        number: "Статья 15",
        title: "Сохранение врачебной тайны",
        content: "Сведения о наличии у гражданина психического расстройства и факте обращения за психиатрической помощью составляют врачебную тайну и могут быть предоставлены только в случаях, предусмотренных законом."
      },
      {
        number: "Статья 16",
        title: "Согласие на лечение",
        content: "Лечение лица, страдающего психическим расстройством, проводится после получения его письменного согласия. Согласие на лечение несовершеннолетних дают их законные представители."
      },
      {
        number: "Статья 17",
        title: "Принудительные меры медицинского характера",
        content: "Принудительные меры медицинского характера применяются по решению суда к лицам, совершившим общественно опасные деяния, в порядке, установленном уголовным законодательством."
      },
      {
        number: "Статья 18",
        title: "Психиатрическое освидетельствование для опекунства",
        content: "Лицо, в отношении которого решается вопрос об установлении опеки или попечительства, подлежит психиатрическому освидетельствованию по решению органа опеки."
      }
    ]
  },
  {
    section: "Раздел IV. Виды психиатрической помощи и порядок ее оказания",
    articles: [
      {
        number: "Статья 19",
        title: "Госпитализация в психиатрический стационар",
        content: "Госпитализация в психиатрический стационар осуществляется добровольно по просьбе или с согласия лица. Несовершеннолетние до 15 лет помещаются по просьбе законных представителей."
      },
      {
        number: "Статья 20",
        title: "Основания для госпитализации в психиатрический стационар",
        content: "Основанием для госпитализации является наличие у лица психического расстройства и решение врача-психиатра о проведении обследования или лечения в стационарных условиях."
      },
      {
        number: "Статья 21",
        title: "Выписка из психиатрического стационара",
        content: "Выписка пациента производится по решению комиссии врачей-психиатров при условии выздоровления или значительного улучшения психического состояния."
      },
      {
        number: "Статья 22",
        title: "Права пациентов, находящихся в психиатрическом стационаре",
        content: "Пациенты имеют право на:\n- встречи с адвокатом;\n- переписку без цензуры;\n- получение образования;\n- информирование о своих правах;\n- обжалование действий медицинского персонала."
      }
    ]
  },
  {
    section: "Раздел V. Недобровольные меры психиатрической помощи",
    articles: [
      {
        number: "Статья 23",
        title: "Психиатрическое освидетельствование",
        content: "Освидетельствование проводятся по просьбе или с согласия обследуемого. В отношении несовершеннолетних - по просьбе родителей. В случаях, предусмотренных законом, может быть проведено без согласия."
      },
      {
        number: "Статья 24",
        title: "Освидетельствование лица без его согласия",
        content: "Может быть проведено без согласия когда обследуемый совершает действия, дающие основания предполагать тяжелое расстройство, обусловливающее:\n- опасность для себя или окружающих;\n- беспомощность;\n- существенный вред здоровью."
      },
      {
        number: "Статья 25",
        title: "Порядок освидетельствования без согласия",
        content: "Решение о психиатрическом освидетельствовании без согласия принимается врачом-психиатром с санкции судьи. Заявление подается в суд по месту жительства."
      },
      {
        number: "Статья 26",
        title: "Порядок рассмотрения заявления",
        content: "Заявление о психиатрическом освидетельствовании рассматривается судьей в течение пяти дней с участием лица, прокурора, врача-психиатра."
      },
      {
        number: "Статья 27",
        title: "Обжалование решения",
        content: "Решение о психиатрическом освидетельствовании может быть обжаловано в вышестоящий суд в течение десяти дней."
      },
      {
        number: "Статья 28",
        title: "Госпитализация в недобровольном порядке",
        content: "Лицо может быть госпитализировано в недобровольном порядке до постановления судьи, если его обследование возможно только в стационаре, а расстройство является тяжелым."
      },
      {
        number: "Статья 29",
        title: "Основания для недобровольной госпитализации",
        content: "Основаниями являются:\n- непосредственная опасность для себя или окружающих;\n- беспомощность;\n- существенный вред здоровью при отсутствии помощи.\n\nЗаключение дается комиссией врачей-психиатров."
      },
      {
        number: "Статья 30",
        title: "Порядок подачи заявления в суд",
        content: "Заявление о госпитализации подается администрацией психиатрического стационара в суд по месту нахождения стационара в течение 48 часов."
      },
      {
        number: "Статья 31",
        title: "Судебное рассмотрение",
        content: "Заявление рассматривается судьей в психиатрическом стационаре в течение пяти дней с участием лица, его представителя, прокурора и врача-психиатра."
      },
      {
        number: "Статья 32",
        title: "Обжалование постановления судьи",
        content: "Постановление судьи о госпитализации может быть обжаловано в апелляционном порядке в течение десяти дней."
      },
      {
        number: "Статья 33",
        title: "Продление недобровольной госпитализации",
        content: "Продление госпитализации производится по решению суда. Заявление подается за десять дней до истечения срока. Первое продление - на шесть месяцев, последующие - на год."
      },
      {
        number: "Статья 34",
        title: "Выписка лица при недобровольной госпитализации",
        content: "Выписка производится по заключению комиссии врачей-психиатров в случае отпадения оснований для недобровольной госпитализации."
      },
      {
        number: "Статья 35",
        title: "Обязательное амбулаторное наблюдение",
        content: "Обязательное амбулаторное наблюдение и лечение устанавливаются судом в отношении лица, совершившего деяние и нуждающегося в принудительном лечении."
      }
    ]
  },
  {
    section: "Раздел VI. Контроль и прокурорский надзор",
    articles: [
      {
        number: "Статья 36",
        title: "Порядок обжалования действий",
        content: "Действия медицинских работников и решения, нарушающие права граждан, могут быть обжалованы в вышестоящий орган, прокуратуру или суд."
      },
      {
        number: "Статья 37",
        title: "Защита прав пациентов",
        content: "Защита прав пациентов психиатрических стационаров осуществляется представительными комиссиями, создаваемыми органами здравоохранения."
      },
      {
        number: "Статья 38",
        title: "Контроль за соблюдением прав",
        content: "Контроль осуществляется:\n- администрацией учреждений;\n- органами власти;\n- судом;\n- прокуратурой;\n- общественными объединениями."
      },
      {
        number: "Статья 39",
        title: "Прокурорский надзор",
        content: "Прокуратура осуществляет надзор за соблюдением прав при оказании психиатрической помощи. Прокурор:\n- приносит протест;\n- вносит представление;\n- возбуждает дело;\n- обращается в суд."
      }
    ]
  },
  {
    section: "Раздел VII. Ответственность за причиненный вред",
    articles: [
      {
        number: "Статья 40",
        title: "Ответственность за нарушение настоящего Закона",
        content: "Медицинские работники несут ответственность за:\n- нарушение прав граждан;\n- незаконное помещение в стационар;\n- разглашение врачебной тайны;\n- неоказание помощи;\n- нарушение порядка применения методов лечения."
      },
      {
        number: "Статья 41",
        title: "Возмещение причиненного вреда",
        content: "Вред, причиненный гражданину при оказании психиатрической помощи, подлежит возмещению в соответствии с гражданским законодательством в полном объеме."
      }
    ]
  },
  {
    section: "Раздел VIII. Применение принудительных мер медицинского характера",
    articles: [
      {
        number: "Статья 42",
        title: "Основания применения принудительных мер",
        content: "Принудительные меры медицинского характера применяются судом к лицам, совершившим общественно опасные деяния и нуждающимся в лечении психических расстройств."
      },
      {
        number: "Статья 43",
        title: "Виды принудительных мер",
        content: "Виды принудительных мер:\n- амбулаторное наблюдение;\n- лечение в психиатрическом стационаре общего типа;\n- лечение в специализированном стационаре;\n- лечение в специализированном стационаре с интенсивным наблюдением."
      },
      {
        number: "Статья 44",
        title: "Порядок применения принудительных мер",
        content: "Принудительные меры применяются по решению суда на основании заключения судебно-психиатрической экспертизы. Продление, изменение и прекращение мер осуществляется судом."
      },
      {
        number: "Статья 45",
        title: "Освидетельствование лиц, к которым применяются принудительные меры",
        content: "Лица, к которым применяются принудительные меры, подлежат освидетельствованию комиссией врачей-психиатров не реже одного раза в шесть месяцев."
      },
      {
        number: "Статья 46",
        title: "Прекращение применения принудительных мер",
        content: "Прекращение применения принудительной меры производится судом на основании заключения комиссии врачей-психиатров о выздоровлении или изменении психического состояния."
      }
    ]
  },
  {
    section: "Раздел IX. Заключительные положения",
    articles: [
      {
        number: "Статья 47",
        title: "Финансирование психиатрической помощи",
        content: "Финансирование психиатрической помощи осуществляется за счет средств бюджетов всех уровней, средств обязательного медицинского страхования и иных источников."
      },
      {
        number: "Статья 48",
        title: "Дополнительные гарантии",
        content: "Субъекты Российской Федерации могут устанавливать дополнительные гарантии прав граждан при оказании психиатрической помощи."
      },
      {
        number: "Статья 49",
        title: "Международные договоры",
        content: "Если международным договором Российской Федерации установлены иные правила, чем предусмотренные настоящим Законом, применяются правила международного договора."
      },
      {
        number: "Статья 50",
        title: "Вступление в силу настоящего Закона",
        content: "Настоящий Закон вступает в силу со дня его официального опубликования. Предложить Президенту Российской Федерации и поручить Правительству Российской Федерации привести свои нормативные акты в соответствие с настоящим Законом."
      }
    ]
  }
];

export default function Index() {
  const [searchQuery, setSearchQuery] = useState('');

  const filteredSections = lawArticles.map(section => ({
    ...section,
    articles: section.articles.filter(article => 
      article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
      article.number.toLowerCase().includes(searchQuery.toLowerCase()) ||
      article.content.toLowerCase().includes(searchQuery.toLowerCase())
    )
  })).filter(section => section.articles.length > 0);

  return (
    <div className="min-h-screen bg-background">
      <header className="border-b border-border bg-card shadow-sm sticky top-0 z-10">
        <div className="max-w-4xl mx-auto px-4 py-6">
          <div className="flex items-center gap-3 mb-4">
            <Icon name="Scale" size={32} className="text-primary" />
            <div>
              <h1 className="text-3xl font-bold text-foreground">Закон РФ № 3185-I</h1>
              <p className="text-sm text-muted-foreground mt-1">О психиатрической помощи и гарантиях прав граждан при её оказании</p>
            </div>
          </div>
          
          <div className="relative">
            <Icon name="Search" size={18} className="absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground" />
            <Input
              type="text"
              placeholder="Поиск по статьям закона..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="pl-10"
            />
          </div>
        </div>
      </header>

      <main className="max-w-4xl mx-auto px-4 py-8">
        {searchQuery && filteredSections.length === 0 && (
          <Card className="p-8 text-center">
            <Icon name="SearchX" size={48} className="mx-auto text-muted-foreground mb-3" />
            <p className="text-muted-foreground">По вашему запросу ничего не найдено</p>
          </Card>
        )}

        <div className="space-y-8">
          {filteredSections.map((section, sectionIndex) => (
            <div key={sectionIndex}>
              <h2 className="text-2xl font-semibold text-foreground mb-4 flex items-center gap-2">
                <Icon name="BookOpen" size={24} className="text-primary" />
                {section.section}
              </h2>
              
              <Accordion type="single" collapsible className="space-y-3">
                {section.articles.map((article, articleIndex) => (
                  <AccordionItem 
                    key={articleIndex} 
                    value={`${sectionIndex}-${articleIndex}`}
                    className="border border-border rounded-lg bg-card shadow-sm hover:shadow-md transition-shadow"
                  >
                    <AccordionTrigger className="px-6 py-4 hover:no-underline">
                      <div className="flex items-start gap-3 text-left">
                        <div className="flex-shrink-0 w-24 font-semibold text-primary">
                          {article.number}
                        </div>
                        <div className="font-medium text-foreground">
                          {article.title}
                        </div>
                      </div>
                    </AccordionTrigger>
                    <AccordionContent className="px-6 pb-4">
                      <div className="pt-3 border-t border-border text-foreground/90 leading-relaxed whitespace-pre-line">
                        {article.content}
                      </div>
                    </AccordionContent>
                  </AccordionItem>
                ))}
              </Accordion>
            </div>
          ))}
        </div>

        <footer className="mt-12 pt-8 border-t border-border text-center text-sm text-muted-foreground">
          <p>Закон Российской Федерации от 2 июля 1992 г. № 3185-I</p>
          <p className="mt-2">«О психиатрической помощи и гарантиях прав граждан при её оказании»</p>
          <p className="mt-4 text-xs">Данный материал носит информационный характер</p>
        </footer>
      </main>
    </div>
  );
}