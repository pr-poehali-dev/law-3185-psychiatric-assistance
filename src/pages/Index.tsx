import { useState } from 'react';
import { Input } from '@/components/ui/input';
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';
import { Card } from '@/components/ui/card';
import Icon from '@/components/ui/icon';

const lawArticles = [
  {
    section: "Раздел I. Общие положения",
    articles: [
      {
        number: "Статья 1",
        title: "Законодательство о психиатрической помощи",
        content: "Законодательство Российской Федерации о психиатрической помощи состоит из настоящего Закона и других федеральных законов, а также законов субъектов Российской Федерации. Правовое регулирование в области оказания психиатрической помощи основывается на Конституции Российской Федерации, общепризнанных принципах и нормах международного права и международных договорах Российской Федерации."
      },
      {
        number: "Статья 2",
        title: "Понятия, применяемые в настоящем Законе",
        content: "В настоящем Законе применяются следующие основные понятия:\n\nпсихиатрическая помощь - комплекс специальных мер медицинского и социального характера, направленных на обследование психического здоровья граждан, диагностику психических расстройств, лечение, уход и медико-социальную реабилитацию лиц, страдающих психическими расстройствами;\n\nпсихическое расстройство - расстройство психической деятельности человека, признанное таковым в соответствии с международными стандартами и классификацией болезней;\n\nпсихиатрическое освидетельствование - осмотр врачом-психиатром для определения психического состояния лица и решения вопроса о необходимости применения к нему мер психиатрической помощи."
      },
      {
        number: "Статья 3",
        title: "Применение настоящего Закона",
        content: "Настоящий Закон применяется в отношении граждан Российской Федерации при оказании им психиатрической помощи. Иностранным гражданам и лицам без гражданства, находящимся на территории Российской Федерации, психиатрическая помощь оказывается в соответствии с настоящим Законом, за исключением случаев, предусмотренных международными договорами Российской Федерации."
      }
    ]
  },
  {
    section: "Раздел II. Права лиц, страдающих психическими расстройствами",
    articles: [
      {
        number: "Статья 4",
        title: "Добровольность обращения за психиатрической помощью",
        content: "Психиатрическая помощь оказывается при добровольном обращении лица или с его согласия, за исключением случаев, предусмотренных настоящим Законом. Несовершеннолетнему в возрасте до 15 лет, а также лицу, признанному в установленном законом порядке недееспособным, психиатрическая помощь оказывается по просьбе или с согласия их законных представителей."
      },
      {
        number: "Статья 5",
        title: "Права лиц, страдающих психическими расстройствами",
        content: "Лица, страдающие психическими расстройствами, обладают всеми правами и свободами граждан, предусмотренными Конституцией Российской Федерации. Ограничение прав и свобод граждан, связанное с психическим расстройством, допустимо лишь в случаях, предусмотренных законами Российской Федерации.\n\nВсе лица, страдающие психическими расстройствами, при оказании им психиатрической помощи имеют право на:\n\nуважительное и гуманное отношение, исключающее унижение человеческого достоинства;\nполучение информации о своих правах;\nпсихиатрическую помощь в наименее ограничительных условиях;\nсодержание в психиатрическом стационаре только в течение срока, необходимого для обследования и лечения;\nсвоевременное и квалифицированное лечение в соответствии с медицинскими показаниями;\nконфиденциальность сведений о факте обращения за психиатрической помощью;\nполучение разъяснений об используемых методах лечения."
      },
      {
        number: "Статья 6",
        title: "Ограничения выполнения отдельных видов профессиональной деятельности",
        content: "Гражданин может быть временно (на срок не более пяти лет и с правом последующего переосвидетельствования) признан непригодным вследствие психического расстройства к выполнению отдельных видов профессиональной деятельности, а также деятельности, связанной с источником повышенной опасности. Такое решение принимается врачебной комиссией, уполномоченной на то органом здравоохранения, на основании оценки состояния психического здоровья гражданина в соответствии с перечнем медицинских психиатрических противопоказаний."
      }
    ]
  },
  {
    section: "Раздел III. Обеспечение психиатрической помощи",
    articles: [
      {
        number: "Статья 7",
        title: "Общие принципы оказания психиатрической помощи",
        content: "Психиатрическая помощь оказывается на основании следующих принципов:\nзаконности;\nгуманности;\nсоблюдения прав человека и гражданина;\nсоблюдения врачебной тайны при оказании психиатрической помощи;\nмногопрофильности психиатрической помощи;\nдоступности психиатрической помощи;\nпреемственности и непрерывности оказания психиатрической помощи.\n\nПри оказании психиатрической помощи должны соблюдаться права и законные интересы граждан."
      },
      {
        number: "Статья 8",
        title: "Виды психиатрической помощи и социальная защита лиц, страдающих психическими расстройствами",
        content: "Психиатрическая помощь включает в себя:\nпсихиатрическое обследование и психиатрическое освидетельствование;\nпрофилактическое наблюдение;\nдиагностику и лечение психических расстройств;\nмедицинскую реабилитацию;\nэкспертизу (военную, судебную, медико-социальную, медико-педагогическую);\nсоциальную реабилитацию и помощь в социальной адаптации.\n\nГосударство гарантирует социальную защиту лиц, страдающих психическими расстройствами."
      },
      {
        number: "Статья 9",
        title: "Учреждения и лица, оказывающие психиатрическую помощь",
        content: "Психиатрическая помощь оказывается медицинскими организациями государственной, муниципальной и частной систем здравоохранения, имеющими лицензию на осуществление медицинской деятельности, предусматривающую выполнение работ (услуг) по психиатрии.\n\nОрганизация стационарной психиатрической помощи осуществляется в психиатрических больницах (отделениях) и психоневрологических диспансерах (отделениях). Психиатрическая помощь лицам, страдающим психическими расстройствами, гарантируется государством и осуществляется на основе принципов законности, гуманности и соблюдения прав человека."
      }
    ]
  },
  {
    section: "Раздел IV. Виды психиатрической помощи и порядок ее оказания",
    articles: [
      {
        number: "Статья 10",
        title: "Диспансерное наблюдение",
        content: "Диспансерное наблюдение может устанавливаться независимо от согласия лица, страдающего психическим расстройством, или его законного представителя в случаях, когда данное лицо по своему психическому состоянию представляет непосредственную опасность для себя или окружающих.\n\nДиспансерное наблюдение устанавливается на основании решения комиссии врачей-психиатров и предполагает наблюдение за состоянием психического здоровья путем регулярных осмотров и оказание необходимой медицинской и социальной помощи."
      },
      {
        number: "Статья 11",
        title: "Консультативно-лечебная помощь в психиатрическом стационаре",
        content: "Лицо, страдающее психическим расстройством, может быть госпитализировано в психиатрический стационар или оставлено в нем при наличии показаний на основании его письменного согласия, за исключением случаев, предусмотренных статьей 29 настоящего Закона (недобровольная госпитализация).\n\nВ психиатрическом стационаре лицу должны быть разъяснены основания и цели госпитализации, его права и установленные в стационаре правила."
      },
      {
        number: "Статья 12",
        title: "Обследование лиц, подозреваемых в совершении преступления",
        content: "По постановлению следователя или определению суда может быть проведено судебно-психиатрическое обследование лица, подозреваемого или обвиняемого в совершении преступления, для определения его психического состояния и способности участвовать в следственных и судебных действиях.\n\nТакое обследование может проводиться в медицинской организации, оказывающей психиатрическую помощь, либо в условиях стационара."
      }
    ]
  },
  {
    section: "Раздел V. Недобровольные меры психиатрической помощи",
    articles: [
      {
        number: "Статья 23",
        title: "Психиатрическое освидетельствование",
        content: "Психиатрическое освидетельствование, а также профилактические осмотры проводятся по просьбе или с согласия обследуемого; в отношении несовершеннолетнего в возрасте до 15 лет - по просьбе или с согласия его родителей либо иного законного представителя; в отношении лица, признанного в установленном законом порядке недееспособным, - по просьбе или с согласия его законного представителя.\n\nВ случаях, предусмотренных законодательством, освидетельствование может быть проведено без согласия лица или его законного представителя."
      },
      {
        number: "Статья 24",
        title: "Освидетельствование лица без его согласия",
        content: "Психиатрическое освидетельствование лица может быть проведено без его согласия или без согласия его законного представителя в случаях, когда по имеющимся данным обследуемый совершает действия, дающие основания предполагать наличие у него тяжелого психического расстройства, которое обусловливает:\n\nего непосредственную опасность для себя или окружающих;\nего беспомощность, то есть неспособность самостоятельно удовлетворять основные жизненные потребности;\nсущественный вред его здоровью вследствие ухудшения психического состояния, если лицо будет оставлено без психиатрической помощи."
      },
      {
        number: "Статья 29",
        title: "Основания для госпитализации в психиатрический стационар в недобровольном порядке",
        content: "Лицо, страдающее психическим расстройством, может быть госпитализировано в психиатрический стационар без его согласия или без согласия его законного представителя до постановления судьи, если его обследование или лечение возможны только в стационарных условиях, а психическое расстройство является тяжелым и обусловливает:\n\nего непосредственную опасность для себя или окружающих;\nего беспомощность, то есть неспособность самостоятельно удовлетворять основные жизненные потребности;\nсущественный вред его здоровью вследствие ухудшения психического состояния, если лицо будет оставлено без психиатрической помощи.\n\nЗаключение о необходимости недобровольной госпитализации дается комиссией врачей-психиатров."
      }
    ]
  },
  {
    section: "Раздел VI. Контроль и прокурорский надзор",
    articles: [
      {
        number: "Статья 38",
        title: "Контроль за соблюдением прав и законных интересов",
        content: "Контроль за соблюдением прав и законных интересов граждан при оказании психиатрической помощи осуществляется:\n\nАдминистрацией психиатрических учреждений и вышестоящими органами управления здравоохранением;\nОрганами представительной и исполнительной власти;\nСудом при рассмотрении жалоб и заявлений граждан;\nПрокуратурой Российской Федерации;\nОбщественными объединениями и иными организациями."
      },
      {
        number: "Статья 39",
        title: "Прокурорский надзор",
        content: "Прокуратура Российской Федерации осуществляет надзор за соблюдением прав и свобод граждан при оказании психиатрической помощи.\n\nПрокурор или его заместитель:\nприносит протест на противоречащие закону правовые акты;\nвносит представление об устранении нарушений закона;\nвозбуждает уголовное дело или производство об административном правонарушении;\nобращается в суд с заявлением в защиту прав, свобод и законных интересов граждан."
      }
    ]
  },
  {
    section: "Раздел VII. Ответственность за нарушение закона",
    articles: [
      {
        number: "Статья 40",
        title: "Ответственность медицинских работников",
        content: "Медицинские работники и иные специалисты, участвующие в оказании психиатрической помощи, несут ответственность в соответствии с законодательством Российской Федерации за:\n\nнарушение прав и законных интересов граждан при оказании им психиатрической помощи;\nнезаконное помещение лица в психиатрический стационар;\nразглашение сведений, составляющих врачебную тайну;\nнеоказание психиатрической помощи лицу, находящемуся в опасном для себя или окружающих состоянии;\nнарушение порядка применения методов диагностики, лечения и социальной реабилитации."
      },
      {
        number: "Статья 41",
        title: "Возмещение вреда",
        content: "Вред, причиненный гражданину при оказании ему психиатрической помощи, подлежит возмещению в соответствии с гражданским законодательством Российской Федерации.\n\nВред, причиненный здоровью или имуществу гражданина действиями медицинских работников и иных специалистов при оказании психиатрической помощи, возмещается медицинской организацией в полном объеме независимо от вины медицинской организации."
      }
    ]
  }
];

export default function Index() {
  const [searchQuery, setSearchQuery] = useState('');

  const filteredSections = lawArticles.map(section => ({
    ...section,
    articles: section.articles.filter(article => 
      article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
      article.number.toLowerCase().includes(searchQuery.toLowerCase()) ||
      article.content.toLowerCase().includes(searchQuery.toLowerCase())
    )
  })).filter(section => section.articles.length > 0);

  return (
    <div className="min-h-screen bg-background">
      <header className="border-b border-border bg-card shadow-sm sticky top-0 z-10">
        <div className="max-w-4xl mx-auto px-4 py-6">
          <div className="flex items-center gap-3 mb-4">
            <Icon name="Scale" size={32} className="text-primary" />
            <div>
              <h1 className="text-3xl font-bold text-foreground">Закон РФ № 3185-I</h1>
              <p className="text-sm text-muted-foreground mt-1">О психиатрической помощи и гарантиях прав граждан при её оказании</p>
            </div>
          </div>
          
          <div className="relative">
            <Icon name="Search" size={18} className="absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground" />
            <Input
              type="text"
              placeholder="Поиск по статьям закона..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="pl-10"
            />
          </div>
        </div>
      </header>

      <main className="max-w-4xl mx-auto px-4 py-8">
        {searchQuery && filteredSections.length === 0 && (
          <Card className="p-8 text-center">
            <Icon name="SearchX" size={48} className="mx-auto text-muted-foreground mb-3" />
            <p className="text-muted-foreground">По вашему запросу ничего не найдено</p>
          </Card>
        )}

        <div className="space-y-8">
          {filteredSections.map((section, sectionIndex) => (
            <div key={sectionIndex}>
              <h2 className="text-2xl font-semibold text-foreground mb-4 flex items-center gap-2">
                <Icon name="BookOpen" size={24} className="text-primary" />
                {section.section}
              </h2>
              
              <Accordion type="single" collapsible className="space-y-3">
                {section.articles.map((article, articleIndex) => (
                  <AccordionItem 
                    key={articleIndex} 
                    value={`${sectionIndex}-${articleIndex}`}
                    className="border border-border rounded-lg bg-card shadow-sm hover:shadow-md transition-shadow"
                  >
                    <AccordionTrigger className="px-6 py-4 hover:no-underline">
                      <div className="flex items-start gap-3 text-left">
                        <div className="flex-shrink-0 w-24 font-semibold text-primary">
                          {article.number}
                        </div>
                        <div className="font-medium text-foreground">
                          {article.title}
                        </div>
                      </div>
                    </AccordionTrigger>
                    <AccordionContent className="px-6 pb-4">
                      <div className="pt-3 border-t border-border text-foreground/90 leading-relaxed whitespace-pre-line">
                        {article.content}
                      </div>
                    </AccordionContent>
                  </AccordionItem>
                ))}
              </Accordion>
            </div>
          ))}
        </div>

        <footer className="mt-12 pt-8 border-t border-border text-center text-sm text-muted-foreground">
          <p>Закон Российской Федерации от 2 июля 1992 г. № 3185-I</p>
          <p className="mt-2">«О психиатрической помощи и гарантиях прав граждан при её оказании»</p>
          <p className="mt-4 text-xs">Данный материал носит информационный характер</p>
        </footer>
      </main>
    </div>
  );
}
